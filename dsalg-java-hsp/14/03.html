<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>动态规划算法 | 数据结构与算法 系列教程（笔记）</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/dsalg-tutorial/favicon.ico">
    <link rel="manifest" href="/dsalg-tutorial/manifest.json">
    <meta name="description" content="数据结构与算法 系列教程学习笔记">
    
    <link rel="preload" href="/dsalg-tutorial/assets/css/0.styles.c775139a.css" as="style"><link rel="preload" href="/dsalg-tutorial/assets/js/app.327cc36e.js" as="script"><link rel="preload" href="/dsalg-tutorial/assets/js/2.536adad5.js" as="script"><link rel="preload" href="/dsalg-tutorial/assets/js/44.a569314b.js" as="script"><link rel="preload" href="/dsalg-tutorial/assets/js/34.afb1225f.js" as="script"><link rel="prefetch" href="/dsalg-tutorial/assets/js/10.3ff626af.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/11.5004ccf5.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/12.23aedd65.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/13.aed7de4c.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/14.879cca43.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/15.fc47c435.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/16.118fd0ae.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/17.e84004ce.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/18.30714318.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/19.11750b8b.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/20.b863b6fa.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/21.2137d97a.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/22.80669c22.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/23.72848772.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/24.1bfedeca.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/25.e2601a21.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/26.e702edb4.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/27.ad8a7c18.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/28.1a99ac84.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/29.5b4e07d0.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/3.9077a884.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/30.ff8db3bd.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/31.2b1ed55c.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/32.0b2d028a.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/33.575680f8.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/35.ff23ab9c.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/36.966af213.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/37.1532f63d.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/38.c5d19f3a.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/39.74bbba40.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/4.1e9539df.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/40.88c2da1f.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/41.8e03ff24.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/42.3b5bd9a1.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/43.fb907a45.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/45.a60de9bb.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/46.d95071d0.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/47.880335c1.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/48.02c3ff97.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/49.2d482c07.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/5.c7039330.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/50.9de303c0.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/51.3c1c6891.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/52.884af6fd.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/53.bf432221.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/54.4fb4af27.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/55.2ea06681.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/56.4e6df2a4.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/57.ae752045.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/58.4468f657.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/59.669915bf.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/6.60f1f064.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/60.4d66bd2d.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/61.660abed2.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/62.c0b906b2.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/63.2a5e7082.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/64.f36cd2b6.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/65.7a82dcaf.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/66.8754f6de.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/67.d3e225ea.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/68.030b474b.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/69.fd9a462f.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/7.a38db74b.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/70.cf2d81c3.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/71.125b9bb8.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/72.a6c442e1.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/73.58a2763a.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/74.ba0df329.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/75.8a88d87c.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/76.06d41bea.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/77.f9b51c70.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/78.19aaa208.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/79.afc7b02d.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/8.57ff1192.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/80.f632c51b.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/9.aa6a27fa.js">
    <link rel="stylesheet" href="/dsalg-tutorial/assets/css/0.styles.c775139a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dsalg-tutorial/" class="home-link router-link-active"><img src="/dsalg-tutorial/mlogo.svg" alt="数据结构与算法 系列教程（笔记）" class="logo"> <span class="site-name can-hide">数据结构与算法 系列教程（笔记）</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dsalg-tutorial/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/dsalg-tutorial/dsalg-java-hsp/" class="nav-link router-link-active">
  图解 Java 数据结构和算法
</a></div><div class="nav-item"><a href="https://github.com/zq99299/repository-summary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记精选汇总
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/zq99299/dsalg-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dsalg-tutorial/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/dsalg-tutorial/dsalg-java-hsp/" class="nav-link router-link-active">
  图解 Java 数据结构和算法
</a></div><div class="nav-item"><a href="https://github.com/zq99299/repository-summary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记精选汇总
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/zq99299/dsalg-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/dsalg-tutorial/dsalg-java-hsp/" aria-current="page" class="sidebar-link">图解 Java 数据结构和算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/01/" class="sidebar-link">内容介绍</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/02/" class="sidebar-link">数据结构和算法概述</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>稀疏数组和队列</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>链表 Linked List</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>栈</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>递归</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>排序算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>查找算法</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/09/" class="sidebar-link">哈希表（散列）</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>树结构-基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>树结构-实际应用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>多路查找树</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>图</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>常用 10 种算法</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/" aria-current="page" class="sidebar-link">常用 10 种算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/01.html" class="sidebar-link">二分查找算法（非递归）</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/02.html" class="sidebar-link">分治算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/03.html" aria-current="page" class="active sidebar-link">动态规划算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dsalg-tutorial/dsalg-java-hsp/14/03.html#应用场景-背包问题" class="sidebar-link">应用场景：背包问题</a></li><li class="sidebar-sub-header"><a href="/dsalg-tutorial/dsalg-java-hsp/14/03.html#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/dsalg-tutorial/dsalg-java-hsp/14/03.html#思路和图解" class="sidebar-link">思路和图解</a></li><li class="sidebar-sub-header"><a href="/dsalg-tutorial/dsalg-java-hsp/14/03.html#代码实现" class="sidebar-link">代码实现</a></li><li class="sidebar-sub-header"><a href="/dsalg-tutorial/dsalg-java-hsp/14/03.html#封装成函数后-任意测试" class="sidebar-link">封装成函数后，任意测试</a></li></ul></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/04.html" class="sidebar-link">KMP 算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/05.html" class="sidebar-link">贪心算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/06.html" class="sidebar-link">普利姆算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/07.html" class="sidebar-link">克鲁斯卡尔算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/08.html" class="sidebar-link">迪杰斯特拉算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/09.html" class="sidebar-link">弗洛伊德算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/10.html" class="sidebar-link">马踏棋盘算法</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="动态规划算法"><a href="#动态规划算法" class="header-anchor">#</a> 动态规划算法</h1> <h2 id="应用场景-背包问题"><a href="#应用场景-背包问题" class="header-anchor">#</a> 应用场景：背包问题</h2> <p>有一个背包，容量为 4 磅，现有物品如下：</p> <table><thead><tr><th style="text-align:center;"><strong>物品</strong></th> <th style="text-align:center;"><strong>重量</strong></th> <th style="text-align:center;"><strong>价格</strong></th></tr></thead> <tbody><tr><td style="text-align:center;">吉他(G)</td> <td style="text-align:center;">1</td> <td style="text-align:center;">1500</td></tr> <tr><td style="text-align:center;">音响(S)</td> <td style="text-align:center;">4</td> <td style="text-align:center;">3000</td></tr> <tr><td style="text-align:center;">电脑(L)</td> <td style="text-align:center;">3</td> <td style="text-align:center;">2000</td></tr></tbody></table> <p>要求：</p> <ol><li>达到的目标为装入的背包的总价值最大，并且重量不超出</li> <li>装入的物品不能重复</li></ol> <h2 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h2> <p><strong>动态规划（Dynamic Programming）</strong> 算法的核心思想是：将大问题划分为小问题进行解决，从而一步步获取最优解的处理算法</p> <p>动态规划算法 <strong>与分治算法类似</strong>，其基本思想也是将待求解问题分解成若干个子问题，先求解子问题，然后从这些子问题的解得到原问题的解。</p> <p><strong>与分治法不同的是</strong>，适合于用动态规划求解的问题，<strong>经分解得到子问题往往不是互相独立的</strong>。 ( 即 <strong>下一个子阶段的求解是建立在上一个子阶段的解的基础上</strong>，进行进一步的求解 )</p> <p>动态规划可以通过 <strong>填表的方式</strong> 来逐步推进，得到最优解.</p> <h2 id="思路和图解"><a href="#思路和图解" class="header-anchor">#</a> 思路和图解</h2> <p>背包问题主要是指一个给定容量的背包、若干具有一定价值和重量的物品，如何选择物品放入背包使物品的价值最大。其中又分：</p> <ul><li><p>01 背包：放入物品不能重复</p></li> <li><p>无限背包：放入物品可重复</p> <p>无限背包可以转化成 01 背包。</p></li></ul> <p>想要解决一个问题，你首先得有思想，然后转化成公式或规律，最后转化成你的程序。</p> <p>算法的主要思想：利用动态规划来解决。每次遍历到的第 i 个物品，根据 <code>w[i]</code> 和 <code>v[i]</code> 来确定是否需要将该物品放入背包中。即设：</p> <ul><li><p>n ： 给定了 n 个物品</p></li> <li><p><code>w[i]</code>：第 i 个商品的重量</p></li> <li><p><code>v[i]</code>：第 i 个商品的价值</p></li> <li><p><code>c</code>：为背包的容量</p></li> <li><p><code>v[i][j]</code>：表示在前 i 个物品中能够装入容量为 j 的背包中的最大价值</p> <p>假设当前已经放了 i 个物品在背包中，那么当前背包的容量为 j，能够放进去的容量用 <code>v[i][j]</code> 表示</p></li></ul> <p>则有下面的结果：</p> <ol><li><code>v[i][0] = v[0][j]=0</code></li> <li>当 <code>w[i] &gt; j</code>时：<code>v[i][j] = v[i - 1][j]</code></li> <li>当 <code>j ≥ w[i]</code> 时：<code>v[i][j] = max{v[i - 1][j] , v[i - 1][j - w[i]] + v[i]}</code></li></ol> <p>以上思路和公式，现在肯定看不懂，下面使用填表法来逐步推导出这个规律和公式。</p> <p>给定的商品如下：</p> <table><thead><tr><th style="text-align:center;"><strong>物品</strong></th> <th style="text-align:center;"><strong>重量</strong></th> <th style="text-align:center;"><strong>价格</strong></th></tr></thead> <tbody><tr><td style="text-align:center;">吉他(G)</td> <td style="text-align:center;">1</td> <td style="text-align:center;">1500</td></tr> <tr><td style="text-align:center;">音响(S)</td> <td style="text-align:center;">4</td> <td style="text-align:center;">3000</td></tr> <tr><td style="text-align:center;">电脑(L)</td> <td style="text-align:center;">3</td> <td style="text-align:center;">2000</td></tr></tbody></table> <p>初始表格为：</p> <table><thead><tr><th style="text-align:center;"><strong>物品</strong></th> <th style="text-align:center;">0 磅</th> <th style="text-align:center;">1 磅</th> <th style="text-align:center;">2 磅</th> <th style="text-align:center;">3 磅</th> <th style="text-align:center;">4 磅</th></tr></thead> <tbody><tr><td style="text-align:center;">没有物品</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">吉他(G)</td> <td style="text-align:center;">0</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">音响(S)</td> <td style="text-align:center;">0</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">电脑(L)</td> <td style="text-align:center;">0</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr></tbody></table> <ul><li>第 1 行：是没有任何物品：那么它在任何背包容量下，都是 0 磅</li> <li>第 1 列：是当背包容量为 0 时，那么它是无法装入任何物品的，所以都是 0</li></ul> <ol><li>现在假如只有吉他可以放：</li></ol> <table><thead><tr><th style="text-align:center;"><strong>物品</strong></th> <th style="text-align:center;">0 磅</th> <th style="text-align:center;">1 磅</th> <th style="text-align:center;">2 磅</th> <th style="text-align:center;">3 磅</th> <th style="text-align:center;">4 磅</th></tr></thead> <tbody><tr><td style="text-align:center;"></td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">吉他(G)</td> <td style="text-align:center;">0</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">1500（G）</td></tr> <tr><td style="text-align:center;">音响(S)</td> <td style="text-align:center;">0</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">电脑(L)</td> <td style="text-align:center;">0</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr></tbody></table> <p>现在只有一把吉他可以放，所以不管背包的容量有多大，它都只能放一把吉他进去（01 背包），所以 4 个容量都为 <code>1500(G)</code></p> <ol start="2"><li>上面已经放了一把吉他，现在开始尝试放音响：</li></ol> <table><thead><tr><th style="text-align:center;"><strong>物品</strong></th> <th style="text-align:center;">0 磅</th> <th style="text-align:center;">1 磅</th> <th style="text-align:center;">2 磅</th> <th style="text-align:center;">3 磅</th> <th style="text-align:center;">4 磅</th></tr></thead> <tbody><tr><td style="text-align:center;"></td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">吉他(G)</td> <td style="text-align:center;">0</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">1500（G）</td></tr> <tr><td style="text-align:center;">音响(S)</td> <td style="text-align:center;">0</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">3000（S）</td></tr> <tr><td style="text-align:center;">电脑(L)</td> <td style="text-align:center;">0</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr></tbody></table> <ul><li><p>当背包容量只有 1 磅时：音响重 4 磅，放不进去</p> <p>那么从上一个单元格复制物品下来，也就是 <code>1500(G)</code> 吉他</p></li> <li><p>类似的：当背包只有 2、3 磅时，也是放不下音响的</p> <p>那么从上一个单元格复制物品下来，也就是 <code>1500(G)</code> 吉他</p></li> <li><p>当背包容量有 4 磅时：可以放下音响了</p> <p>需要考虑当前音响放进去的价值，是否大于上一个单元格（子问题的解依赖于上一个子问题的解）</p> <p>这里是 3000 &gt; 1500，那么此时 4 磅的格子中就放入了 <code>3000(S)</code> 音响</p></li></ul> <ol start="3"><li>现在开始尝试放电脑：</li></ol> <table><thead><tr><th style="text-align:center;"><strong>物品</strong></th> <th style="text-align:center;">0 磅</th> <th style="text-align:center;">1 磅</th> <th style="text-align:center;">2 磅</th> <th style="text-align:center;">3 磅</th> <th style="text-align:center;">4 磅</th></tr></thead> <tbody><tr><td style="text-align:center;"></td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">吉他(G)</td> <td style="text-align:center;">0</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">1500（G）</td></tr> <tr><td style="text-align:center;">音响(S)</td> <td style="text-align:center;">0</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">3000（S）</td></tr> <tr><td style="text-align:center;">电脑(L)</td> <td style="text-align:center;">0</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">1500（G）</td> <td style="text-align:center;">2000（L）</td> <td style="text-align:center;">2000（L）+ 1500（G）</td></tr></tbody></table> <ul><li><p>当背包容量只有 1、2 磅时：电脑重量 3 磅，放不进去</p> <p>那么从上一个单元格复制物品下来，也就是 <code>1500(G)</code> 吉他</p></li> <li><p>当背包容量只有 3 磅时：可以放下电脑了</p> <p>需要考虑当前电脑放进去的价值，是否大于上一个单元格。</p> <p>2000  &gt; 1500，那么就放入 <code>2000(L)</code> 电脑。</p></li> <li><p>当背包容量只有 4 磅时：此时如果不考虑程序实现，人为填表的话</p> <p>可以放 <code>2000（L）+ 1500（G）</code> 的电脑和吉他</p></li></ul> <p>表填完，下面再来看公式的含义：</p> <ol><li><p><code>v[i][0] = v[0][j]=0</code></p> <p>表示表中的第一行和第一列是 0；</p> <p>i：表示商品</p> <p>j：表示当前背包的容量</p> <p>那么 <code>v[i][j]</code> 表示在前 i 个物品中能够装入容量为 j 的背包中的最大价值</p> <p>比如 <code>v[i][j]</code> → <code>v[2][1]</code> ，也就是下图中红框部分，在 1 磅的背包容量中，可选择放入的商品有吉他和音响，那么此时背包中可放入商品的最大价值为  1500，也就是只能放入一把吉他</p> <p><img src="/dsalg-tutorial/assets/img/image-20210103123733067.ca318d67.png" alt="image-20210103123733067"></p></li> <li><p>当 <code>w[i] &gt; j</code>时：<code>v[i][j] = v[i-1][j]</code></p> <p><code>w[i]</code> 是第 i 个商品的重量，j 是当前背包的容量。</p> <p>当要放入的第 i 个商品的重量大于 当前背包的容量时，表示不能把当前的商品放入，则直接使用上一个单元格的装入策略</p></li> <li><p>当 <code>j ≥ w[i]</code> 时：<code>v[i][j] = max{v[i - 1][j],v[i - 1][j - w[i]] + v[i]}</code></p> <p><img src="/dsalg-tutorial/assets/img/image-20210103124813651.827c4b5f.png" alt="image-20210103124813651"></p> <p>当当前背包容量可以装入第 i 个商品的时候：</p> <ul><li><p><code>v[i - 1][j]</code>：<strong>上一个格子</strong> 的商品存放策略 <strong>总价值</strong></p> <p>当前背包重量为 <code>j=4</code>，商品下表为 <code>3</code></p> <p>上一个格子的商品存放策略总价值 <code>v[3-1][4] = v[2][4]</code> 也就是 <code>3000(S)</code></p></li> <li><p><code>v[i]</code>：当前商品的价值</p> <p>也就是 <code>v[3]</code> 电脑的价值为 2000</p></li> <li><p><code>[j - w[i]</code>：当前背包的重量 - 第 i 个商品的重量，也就是 <strong>剩余背包容量</strong></p> <p>比如上图红框中：当前背包重量为 4，当前尝试放入的商品重量是电脑的重量为 3，则<code>4-3 = 1</code>，当前商品存放之后，还剩余 1 磅的背包可以装东西</p></li> <li><p><code>v[i - 1][j - w[i]] + v[i]</code>： <strong>剩余空间商品总价值 + 当前商品总价值</strong></p> <p><code>v[3-1][4-3] + v[3] = v[2][1] + v[3]</code> 也就是：</p> <ul><li><code>v[2][1]</code>：1500(G)，剩余空间放置的商品价值</li> <li><code>v[3]</code>：2000(L) ，当前商品所占的价值</li></ul></li> <li><p><code>max{v[i - 1],v[i - 1][j - w[i]] + v[i]}</code></p> <p>也就是 <code>max(3000,1500+2000)</code> 结果为 3500</p></li></ul> <p>上述步骤推导下来，就是上面红框中的结果。即：</p> <ul><li><code>j ≥ w[i]</code>：当前背包存放地 i 个商品后，还有剩余空间容量</li> <li><code>v[i][j] = max{v[i - 1][j],v[i - 1][j - w[i]] + v[i]}</code>：当前格子价值 = <code>max(上一个格子存放商品的总价值,剩余空间商品总价值+当前商品总价值)</code></li></ul></li></ol> <p>好了，那么对于这个公式，由填表法推导出来的，为什么需要 <strong>没有物品</strong> 和 <strong>0 磅</strong> 来占位？</p> <p>在公式计算中，如 <code>j - w[i]</code> → <code>4-w[3]</code></p> <ul><li>j 表示当前的背包容量，也是数组中的下标，如上：4 表示第 4 列，是容量为 4 磅的背包</li> <li><code>w[i]</code> 中的 i 表示是第几个商品，<code>w[3]</code>，表示第 3 行，也就是电脑这个商品，的重量是 3</li></ul> <p>所以，纯粹只是为了对应。</p> <h2 id="代码实现"><a href="#代码实现" class="header-anchor">#</a> 代码实现</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>mrcode<span class="token punctuation">.</span>study<span class="token punctuation">.</span>dsalgtutorialdemo<span class="token punctuation">.</span>algorithm<span class="token punctuation">.</span>dynamic</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 动态规划
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KnapsackProblem</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * 填表法：输出填表后的信息
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">table</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 商品价值和重量前面都有一个 0 ，方便后续的公式写法</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> val <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 商品价值</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> w <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 商品对应重量</span>
        <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// 背包容量</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> val<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 物品个数</span>
        <span class="token comment">// 构建初始表格， +1 是因为有一行列和行都是 0</span>
        <span class="token comment">// v[i][j] 存放的是：前 i 个物品中能够装入容量为 j 的背包中的最大价值</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token comment">// 1. 初始化  v[i][0] = v[0][j]=0</span>
        <span class="token comment">//    本程序中，可以不初始化，默认就是 0</span>
        <span class="token comment">//    为了体现步骤，进行初始化（有可能在你的场景中有其他的含义）</span>
        <span class="token comment">// 为了与默认值 0 区分开，看出初始化效果，这里默 0 定义为 -1</span>
        <span class="token comment">// 验证之后，修改回 0，否则在计算上一个格子的时候，就会导致计算错误</span>
        <span class="token keyword">int</span> zero <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> zero<span class="token punctuation">;</span> <span class="token comment">// 初始化第一列为 0</span>
                v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> zero<span class="token punctuation">;</span> <span class="token comment">// 初始化第一行为 0</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">print</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 开始填表：动态规划处理</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 第一行 0 不处理，从 1 开始</span>
            <span class="token comment">// 一个商品一个容量进行尝试</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 第一列 0 不处理，从 1 开始</span>
                <span class="token comment">// 当当前物品重量大于，背包限定重量时：</span>
                <span class="token comment">//   当前背包容量，可存放最大的商品价值为：前一格子中的存放策略总价值</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>w<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// 当当前背包容量 大于 当前物品重量时：</span>
                <span class="token comment">//      说明：还有空余空间存放其他产品</span>
                <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token comment">// max{v[i - 1][j],v[i - 1][j - w[i]] + v[i]}`</span>
                    <span class="token keyword">int</span> pre <span class="token operator">=</span> v<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 前一个格子中存放策略总价值</span>
                    <span class="token keyword">int</span> curr <span class="token operator">=</span> val<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// i当前商品总价值</span>
                    <span class="token keyword">int</span> free <span class="token operator">=</span> v<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 存放完当前商品后，剩余空间能存放的总价值</span>
                    <span class="token comment">// 当前格子：只会存放比上一个格子总价值大的策略价值</span>
                    v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> curr <span class="token operator">+</span> free<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;动态规划后&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 打印填表信息
     *
     * @param table
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> table<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> table<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>table<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br></div></div><p>测试输出</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[0, 0, 0, 0, 0]
[0, 0, 0, 0, 0]
[0, 0, 0, 0, 0]
[0, 0, 0, 0, 0]
动态规划后
[0, 0, 0, 0, 0]
[0, 1500, 1500, 1500, 1500]
[0, 1500, 1500, 1500, 3000]
[0, 1500, 1500, 2000, 3500]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这里只是把表中最大价值，规划出来了，但是不知道那个格子中，存放的是什么商品。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">/**
     * 填表法：输出填表后的信息,包括最优存放的商品信息
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">tableAndProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 商品价值和重量前面都有一个 0 ，方便后续的公式写法</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> val <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 商品价值</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> w <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 商品对应重量</span>
        <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// 背包容量</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> val<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 物品个数</span>
        <span class="token comment">// 构建初始表格， +1 是因为有一行列和行都是 0</span>
        <span class="token comment">// v[i][j] 存放的是：前 i 个物品中能够装入容量为 j 的背包中的最大价值</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> zero <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> zero<span class="token punctuation">;</span> <span class="token comment">// 初始化第一列为 0</span>
                v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> zero<span class="token punctuation">;</span> <span class="token comment">// 初始化第一行为 0</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">print</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 用于存放每个格子中保存的商品</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token comment">// 开始填表：动态规划处理</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 第一行 0 不处理，从 1 开始</span>
            <span class="token comment">// 一个商品一个容量进行尝试</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 第一列 0 不处理，从 1 开始</span>
                <span class="token comment">// 当当前物品重量大于，背包限定重量时：</span>
                <span class="token comment">//   当前背包容量，可存放最大的商品价值为：前一格子中的存放策略总价值</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>w<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// 当当前背包容量 大于 当前物品重量时：</span>
                <span class="token comment">//      说明：还有空余空间存放其他产品</span>
                <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token comment">// max{v[i - 1][j],v[i - 1][j - w[i]] + v[i]}`</span>
                    <span class="token keyword">int</span> pre <span class="token operator">=</span> v<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 前一个格子中存放策略总价值</span>
                    <span class="token keyword">int</span> curr <span class="token operator">=</span> val<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// i当前商品总价值</span>
                    <span class="token keyword">int</span> free <span class="token operator">=</span> v<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 存放完当前商品后，剩余空间能存放的总价值</span>
                    <span class="token comment">// 当前格子：只会存放比上一个格子总价值大的策略价值</span>
<span class="token comment">//                    v[i][j] = Math.max(pre, curr + free);</span>
                    <span class="token comment">// 当需要存放新的策略时，标记当前路径</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>pre <span class="token operator">&lt;</span> curr <span class="token operator">+</span> free<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> curr <span class="token operator">+</span> free<span class="token punctuation">;</span>
                        path<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> pre<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;动态规划后&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;存放路径&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;提取最优商品存放信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> path<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 行的最大下标</span>
        <span class="token keyword">int</span> j <span class="token operator">=</span> path<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 列的最大下标</span>
        <span class="token comment">// 从 path 最后开始往前找</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;第 %d 个商品放入背包，坐标[%d,%d] \n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 当前格子商品组成为：当前商品重量 + 剩余重量</span>
                <span class="token comment">// 所以：要重置 j 为剩余重量</span>
                j <span class="token operator">=</span> j <span class="token operator">-</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            i<span class="token operator">--</span><span class="token punctuation">;</span> <span class="token comment">// 找完一行，则减少一行，往前面找</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br></div></div><p>测试输出</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[0, 0, 0, 0, 0]
[0, 0, 0, 0, 0]
[0, 0, 0, 0, 0]
[0, 0, 0, 0, 0]
动态规划后
[0, 0, 0, 0, 0]
[0, 1500, 1500, 1500, 1500]
[0, 1500, 1500, 1500, 3000]
[0, 1500, 1500, 2000, 3500]
存放路径
[0, 0, 0, 0, 0]
[0, 1, 1, 1, 1]
[0, 0, 0, 0, 1]
[0, 0, 0, 1, 1]
# 上面的存放路径为：
#   1 的则表示，在那个格子里面存放了自己的商品进去的
#   0 的则表示，当前的商品无法存入到这个背包中，使用的是前一个格子的商品存放策略

提取最优商品存放信息
第 3 个商品放入背包，坐标[3,4] 
第 1 个商品放入背包，坐标[1,1] 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>然后看存入商品的信息的坐标，价值是 3500：</p> <ul><li>首先把 电脑 2000 存入进去，剩余重量只有 1 了</li> <li>那么就去找背包重量为 1 的格子，限定在第 1 列上面了，那么就只有 1,1 符合，也就定位了商品</li></ul> <h2 id="封装成函数后-任意测试"><a href="#封装成函数后-任意测试" class="header-anchor">#</a> 封装成函数后，任意测试</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">// 封装成方法，测试更多的商品</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">tableAndProduct2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> val <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 商品价值</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> w <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 商品对应重量</span>
        <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// 背包容量</span>
        <span class="token function">knapsackProblem</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> w<span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 背包问题：动态规划
     *
     * @param val 商品价值，第 0 个为没有商品
     * @param w   商品重量，第 0 个为没有重量
     * @param m   背包容量
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">knapsackProblem</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> val<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 商品价值和重量前面都有一个 0 ，方便后续的公式写法</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> val<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 物品个数</span>
        <span class="token comment">// 构建初始表格， +1 是因为有一行列和行都是 0</span>
        <span class="token comment">// v[i][j] 存放的是：前 i 个物品中能够装入容量为 j 的背包中的最大价值</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> zero <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> zero<span class="token punctuation">;</span> <span class="token comment">// 初始化第一列为 0</span>
                v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> zero<span class="token punctuation">;</span> <span class="token comment">// 初始化第一行为 0</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">print</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 用于存放每个格子中保存的商品</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token comment">// 开始填表：动态规划处理</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 第一行 0 不处理，从 1 开始</span>
            <span class="token comment">// 一个商品一个容量进行尝试</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 第一列 0 不处理，从 1 开始</span>
                <span class="token comment">// 当当前物品重量大于，背包限定重量时：</span>
                <span class="token comment">//   当前背包容量，可存放最大的商品价值为：前一格子中的存放策略总价值</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>w<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// 当当前背包容量 大于 当前物品重量时：</span>
                <span class="token comment">//      说明：还有空余空间存放其他产品</span>
                <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token comment">// max{v[i - 1][j],v[i - 1][j - w[i]] + v[i]}`</span>
                    <span class="token keyword">int</span> pre <span class="token operator">=</span> v<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 前一个格子中存放策略总价值</span>
                    <span class="token keyword">int</span> curr <span class="token operator">=</span> val<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// i当前商品总价值</span>
                    <span class="token keyword">int</span> free <span class="token operator">=</span> v<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 存放完当前商品后，剩余空间能存放的总价值</span>
                    <span class="token comment">// 当前格子：只会存放比上一个格子总价值大的策略价值</span>
<span class="token comment">//                    v[i][j] = Math.max(pre, curr + free);</span>
                    <span class="token comment">// 当需要存放新的策略时，标记当前路径</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>pre <span class="token operator">&lt;</span> curr <span class="token operator">+</span> free<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> curr <span class="token operator">+</span> free<span class="token punctuation">;</span>
                        path<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> pre<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;动态规划后&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;存放路径&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;提取最优商品存放信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> path<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 行的最大下标</span>
        <span class="token keyword">int</span> j <span class="token operator">=</span> path<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 列的最大下标</span>
        <span class="token comment">// 从 path 最后开始往前找</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;第 %d 个商品放入背包，坐标[%d,%d] \n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 当前格子商品组成为：当前商品重量 + 剩余重量</span>
                <span class="token comment">// 所以：要重置 j 为剩余重量</span>
                j <span class="token operator">=</span> j <span class="token operator">-</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            i<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br></div></div><p>输出信息</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0]
动态规划后
[0, 0, 0, 0, 0, 0]
[0, 1500, 1500, 1500, 1500, 1500]
[0, 1500, 1500, 1500, 3000, 4500]
[0, 1500, 1500, 2000, 3500, 4500]
[0, 1500, 1700, 2000, 3500, 4500]
存放路径
[0, 0, 0, 0, 0, 0]
[0, 1, 1, 1, 1, 1]
[0, 0, 0, 0, 1, 1]
[0, 0, 0, 1, 1, 0]
[0, 0, 1, 0, 0, 0]
提取最优商品存放信息
第 2 个商品放入背包，坐标[2,5] 
第 1 个商品放入背包，坐标[1,1] 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>最终可以看到，需要根据它的存入路径来查找，比如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[0, 0, 0, 0, 0, 0]
[0, 1, 1, 1, 1, 1]
[0, 0, 0, 0, 1, 1]
[0, 0, 0, 1, 1, 0]
[0, 0, 1, 0, 0, 0]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol><li>先把第一行（有第 0 行）也就是第一个商品，尝试放到不同容量的背包中</li> <li>然后尝试把剩余的商品挨个放到背包中，最重要的是：<strong>基于前面已经放过的结果，判定是否可以放进去</strong></li> <li>基于前面的结果：
<ul><li>可以放进去：表示容量至少能放进当前这个产品，路径中用 1 表示</li> <li>不可放进去：表示容量不能放进去当前这个产品，路径中用 0 表示</li></ul></li> <li>那么再基于最后的价值最高的，找到放进去过产品的路径，就完成了。</li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zq99299/dsalg-tutorial/edit/master/docs/dsalg-java-hsp/14/03.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新: :</span> <span class="time">2023-07-11 02:11:54</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dsalg-tutorial/dsalg-java-hsp/14/02.html" class="prev">
        分治算法
      </a></span> <span class="next"><a href="/dsalg-tutorial/dsalg-java-hsp/14/04.html">
        KMP 算法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/dsalg-tutorial/assets/js/app.327cc36e.js" defer></script><script src="/dsalg-tutorial/assets/js/2.536adad5.js" defer></script><script src="/dsalg-tutorial/assets/js/44.a569314b.js" defer></script><script src="/dsalg-tutorial/assets/js/34.afb1225f.js" defer></script>
  </body>
</html>
