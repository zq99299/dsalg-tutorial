<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>弗洛伊德算法 | 数据结构与算法 系列教程（笔记）</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/dsalg-tutorial/favicon.ico">
    <link rel="manifest" href="/dsalg-tutorial/manifest.json">
    <meta name="description" content="数据结构与算法 系列教程学习笔记">
    
    <link rel="preload" href="/dsalg-tutorial/assets/css/0.styles.c775139a.css" as="style"><link rel="preload" href="/dsalg-tutorial/assets/js/app.344c66ff.js" as="script"><link rel="preload" href="/dsalg-tutorial/assets/js/2.536adad5.js" as="script"><link rel="preload" href="/dsalg-tutorial/assets/js/12.23aedd65.js" as="script"><link rel="preload" href="/dsalg-tutorial/assets/js/34.afb1225f.js" as="script"><link rel="prefetch" href="/dsalg-tutorial/assets/js/10.310b32f1.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/11.fa04ccf9.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/13.aed7de4c.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/14.879cca43.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/15.fc47c435.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/16.118fd0ae.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/17.e84004ce.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/18.30714318.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/19.11750b8b.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/20.b863b6fa.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/21.2137d97a.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/22.80669c22.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/23.72848772.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/24.1bfedeca.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/25.e2601a21.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/26.e702edb4.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/27.ad8a7c18.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/28.e4d7a682.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/29.5b4e07d0.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/3.9077a884.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/30.ff8db3bd.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/31.2b1ed55c.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/32.0b2d028a.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/33.575680f8.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/35.ff23ab9c.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/36.966af213.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/37.1532f63d.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/38.c5d19f3a.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/39.74bbba40.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/4.1e9539df.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/40.88c2da1f.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/41.8e03ff24.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/42.3b5bd9a1.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/43.fb907a45.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/44.a569314b.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/45.a60de9bb.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/46.d95071d0.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/47.880335c1.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/48.02c3ff97.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/49.2d482c07.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/5.c7039330.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/50.9de303c0.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/51.3c1c6891.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/52.beddf0ea.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/53.bf432221.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/54.4fb4af27.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/55.2ea06681.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/56.4e6df2a4.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/57.ae752045.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/58.4468f657.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/59.669915bf.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/6.a9e97fc7.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/60.4d66bd2d.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/61.ca05d424.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/62.c0b906b2.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/63.a0dc0f05.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/64.f36cd2b6.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/65.7a82dcaf.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/66.8754f6de.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/67.d3e225ea.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/68.030b474b.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/69.fd9a462f.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/7.a38db74b.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/70.cf2d81c3.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/71.125b9bb8.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/72.a6c442e1.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/73.58a2763a.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/74.ba0df329.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/75.8a88d87c.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/76.06d41bea.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/77.f9b51c70.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/78.19aaa208.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/79.afc7b02d.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/8.57ff1192.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/80.f632c51b.js"><link rel="prefetch" href="/dsalg-tutorial/assets/js/9.aa6a27fa.js">
    <link rel="stylesheet" href="/dsalg-tutorial/assets/css/0.styles.c775139a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dsalg-tutorial/" class="home-link router-link-active"><img src="/dsalg-tutorial/mlogo.svg" alt="数据结构与算法 系列教程（笔记）" class="logo"> <span class="site-name can-hide">数据结构与算法 系列教程（笔记）</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dsalg-tutorial/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/dsalg-tutorial/dsalg-java-hsp/" class="nav-link router-link-active">
  图解 Java 数据结构和算法
</a></div><div class="nav-item"><a href="https://github.com/zq99299/repository-summary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记精选汇总
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/zq99299/dsalg-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dsalg-tutorial/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/dsalg-tutorial/dsalg-java-hsp/" class="nav-link router-link-active">
  图解 Java 数据结构和算法
</a></div><div class="nav-item"><a href="https://github.com/zq99299/repository-summary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记精选汇总
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/zq99299/dsalg-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/dsalg-tutorial/dsalg-java-hsp/" aria-current="page" class="sidebar-link">图解 Java 数据结构和算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/01/" class="sidebar-link">内容介绍</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/02/" class="sidebar-link">数据结构和算法概述</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>稀疏数组和队列</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>链表 Linked List</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>栈</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>递归</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>排序算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>查找算法</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/09/" class="sidebar-link">哈希表（散列）</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>树结构-基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>树结构-实际应用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>多路查找树</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>图</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>常用 10 种算法</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/" aria-current="page" class="sidebar-link">常用 10 种算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/01.html" class="sidebar-link">二分查找算法（非递归）</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/02.html" class="sidebar-link">分治算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/03.html" class="sidebar-link">动态规划算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/04.html" class="sidebar-link">KMP 算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/05.html" class="sidebar-link">贪心算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/06.html" class="sidebar-link">普利姆算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/07.html" class="sidebar-link">克鲁斯卡尔算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/08.html" class="sidebar-link">迪杰斯特拉算法</a></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/09.html" aria-current="page" class="active sidebar-link">弗洛伊德算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dsalg-tutorial/dsalg-java-hsp/14/09.html#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/dsalg-tutorial/dsalg-java-hsp/14/09.html#核心思想" class="sidebar-link">核心思想</a></li><li class="sidebar-sub-header"><a href="/dsalg-tutorial/dsalg-java-hsp/14/09.html#图解" class="sidebar-link">图解</a></li><li class="sidebar-sub-header"><a href="/dsalg-tutorial/dsalg-java-hsp/14/09.html#弗洛伊德算法最佳应用-最短路径" class="sidebar-link">弗洛伊德算法最佳应用-最短路径</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dsalg-tutorial/dsalg-java-hsp/14/09.html#准备工作" class="sidebar-link">准备工作</a></li><li class="sidebar-sub-header"><a href="/dsalg-tutorial/dsalg-java-hsp/14/09.html#弗洛伊德算法核心代码" class="sidebar-link">弗洛伊德算法核心代码</a></li><li class="sidebar-sub-header"><a href="/dsalg-tutorial/dsalg-java-hsp/14/09.html#关于前驱节点的计算" class="sidebar-link">关于前驱节点的计算</a></li></ul></li></ul></li><li><a href="/dsalg-tutorial/dsalg-java-hsp/14/10.html" class="sidebar-link">马踏棋盘算法</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="弗洛伊德算法"><a href="#弗洛伊德算法" class="header-anchor">#</a> 弗洛伊德算法</h1> <h2 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h2> <p>和 Dijkstra 算法一样，<strong>弗洛伊德(Floyd)算法</strong> 也是一种用于寻找给定的加权图中顶点间最短路径的算法。该算法名称以创始人之一、1978 年图灵奖获得者、斯坦福大学计算机科学系教授罗伯特·弗洛伊德命名</p> <p>弗洛伊德算法(Floyd)计算图中 <strong>各个顶点之间</strong> 的最短路径，比如：先从 A 出发到各个点的最短路径，再从 B 出发，直到所有节点距离各个点的路径都会计算出来。而迪杰斯特拉算法用于计算图中 <strong>某一个顶点到其他顶点的最短路径</strong>。</p> <p>弗洛伊德算法 VS 迪杰斯特拉算法：</p> <ul><li>迪杰斯特拉算法通过选定的被访问顶点，求出从出发访问顶点到其他顶点的最短路径；</li> <li>弗洛伊德算法中每一个顶点都是出发访问点，所以需要将每一个顶点看做被访问顶点，求出从每一个顶点到其他顶点的最短路径。</li></ul> <h2 id="核心思想"><a href="#核心思想" class="header-anchor">#</a> 核心思想</h2> <p>设：</p> <ul><li>顶点 vi 到顶点 vk 的最短路径已知为Lik，</li> <li>顶点 vk 到 vj 的最短路径已知为 Lkj</li> <li>顶点 vi 到 vj 的路径为 Lij</li></ul> <p>则 vi 到 vj 的最短路径为：<code>min((Lik+Lkj),Lij)</code>，vk 的取值为图中所有顶点，则可获得 vi 到 vj 的最短路径（则：假设三个点（不一定是具体的是 3 个点），一个直达，一个间接到达，算哪个路径最短）</p> <p>至于 vi 到 vk 的最短路径 Lik 或者 vk 到 vj 的最短路径 Lkj，是以同样的方式获得</p> <h2 id="图解"><a href="#图解" class="header-anchor">#</a> 图解</h2> <p>以前面的公交站距离图解</p> <p><img src="/dsalg-tutorial/assets/img/image-20210110171534255.e479a789.png" alt="image-20210110171534255"></p> <p>上图中含义：</p> <ul><li>0：表示自己与自己。如 A,A</li> <li>N：表示不可直连</li></ul> <p><img src="/dsalg-tutorial/assets/img/image-20210110171628121.d4b42ca9.png" alt="image-20210110171628121"></p> <p>初始前驱顶点如上图：每个节点到达其他节点的初始前驱都是它自己。</p> <ul><li><p>第一轮循环中，以 A (下标为：0) 作为 <strong>中间顶点</strong>，距离表和前驱关系更新为：</p> <p><img src="/dsalg-tutorial/assets/img/image-20210110172409026.7c57dece.png" alt="image-20210110172409026"></p> <ol><li><p>找出以 A 为中间顶点的路径：</p> <ul><li><code>C-A-G</code>：距离为 9</li> <li><code>C-A-B</code>：距离为 12</li> <li><code>G-A-B</code>：距离为 7</li></ul> <p>因为图是无向的，只需要计算一个方向的即可。</p></li> <li><p>更新距离表，需要与上一次的距离表作为参照对比</p> <p><img src="/dsalg-tutorial/assets/img/image-20210110171534255.e479a789.png" alt="image-20210110171534255"></p> <ul><li><code>C-A-G</code>：距离为 9，原始  <code>C,G</code> 距离为 N，9 &lt; N，则更新 <code>C,G = 9</code></li> <li><code>C-A-B</code>：距离为 12，原始 <code>C,B</code> 距离为 N，12 &lt; N，则更新 <code>C,B=12</code></li> <li><code>G-A-B</code>：距离为 7，原始 <code>G,B</code> 距离为 3，则不更新</li></ul> <p>另外由于是无向图，更新其中一个，那么另外一个方向的也要同步更新。</p> <p>同时：更新对应位置的前驱节点为 A</p></li> <li><p>如何找出以 A 为中间顶点的所有路径？</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 使用 3 个数组来实现，思路如下</span>
中间顶点：<span class="token punctuation">[</span><span class="token class-name">A</span><span class="token punctuation">,</span><span class="token class-name">B</span><span class="token punctuation">,</span><span class="token class-name">C</span><span class="token punctuation">,</span><span class="token class-name">D</span><span class="token punctuation">,</span><span class="token class-name">E</span><span class="token punctuation">,</span><span class="token class-name">F</span><span class="token punctuation">,</span><span class="token class-name">G</span><span class="token punctuation">]</span> k<span class="token operator">=</span><span class="token number">0</span>
出发顶点：<span class="token punctuation">[</span><span class="token class-name">A</span><span class="token punctuation">,</span><span class="token class-name">B</span><span class="token punctuation">,</span><span class="token class-name">C</span><span class="token punctuation">,</span><span class="token class-name">D</span><span class="token punctuation">,</span><span class="token class-name">E</span><span class="token punctuation">,</span><span class="token class-name">F</span><span class="token punctuation">,</span><span class="token class-name">G</span><span class="token punctuation">]</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
终点顶点：<span class="token punctuation">[</span><span class="token class-name">A</span><span class="token punctuation">,</span><span class="token class-name">B</span><span class="token punctuation">,</span><span class="token class-name">C</span><span class="token punctuation">,</span><span class="token class-name">D</span><span class="token punctuation">,</span><span class="token class-name">E</span><span class="token punctuation">,</span><span class="token class-name">F</span><span class="token punctuation">,</span><span class="token class-name">G</span><span class="token punctuation">]</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  
以 k 为中间顶点时，使用一个双层循环<span class="token punctuation">,</span>来遍历出所有的情况
并在这个寻找路径的循环中，找出最短路径，去更新上述所演示的：距离表、前驱表
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>当把 A 作为中间顶点路径寻找完成之后，表中的数据则为 A 到所有顶点的最短距离。</p> <p>当所有顶点都更新之后，最后就是每个顶点到其他顶点的最短距离（注：所有顶点没有更新完成之前，最终结果不一定是最短的，后续可能还会更新）</p> <p>看上去很简单，就是一个三层 for 循环，但是它的时间复杂度是 n<sup>3</sup>，比如这里有 7 个节点，那么循环的次数是 <code>7x7x7=343</code></p></li></ol></li></ul> <h2 id="弗洛伊德算法最佳应用-最短路径"><a href="#弗洛伊德算法最佳应用-最短路径" class="header-anchor">#</a> 弗洛伊德算法最佳应用-最短路径</h2> <p><img src="/dsalg-tutorial/assets/img/image-20210105181340256.2593f8ad.png" alt="image-20210105181340256"></p> <p>胜利乡有 7 个村庄  <code>(A, B, C, D, E, F, G)</code>，各个村庄的距离用边线表示（权），比如 A-B 距离为 5 公里</p> <p>问：如何计算出 <strong>各村庄到其他各村庄的最短距离</strong>？</p> <p>下面直接用代码实现，前面图解和思路都说了。</p> <h3 id="准备工作"><a href="#准备工作" class="header-anchor">#</a> 准备工作</h3> <p>主要做了 3 件事情：</p> <ol><li>复用了之前的无向图和打印功能</li> <li>初始化弗洛伊德算法中用到的 3 个数组和初始化</li> <li>打印状态和结果</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>mrcode<span class="token punctuation">.</span>study<span class="token punctuation">.</span>dsalgtutorialdemo<span class="token punctuation">.</span>algorithm<span class="token punctuation">.</span>floyd</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 佛洛依德算法-最短路径
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FloydAlgorithm</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * 图：首先需要有一个带权的连通无向图
     */</span>
    <span class="token keyword">class</span> <span class="token class-name">MGraph</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> vertex<span class="token punctuation">;</span>  <span class="token comment">// 顶点个数</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> weights<span class="token punctuation">;</span>  <span class="token comment">// 邻接矩阵</span>
        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> datas<span class="token punctuation">;</span> <span class="token comment">// 村庄数据</span>

        <span class="token comment">/**
         * @param vertex  村庄数量， 会按照数量，按顺序生成村庄，如 A、B、C...
         * @param weights 需要你自己定义好那些点是连通的，那些不是连通的
         */</span>
        <span class="token keyword">public</span> <span class="token class-name">MGraph</span><span class="token punctuation">(</span><span class="token keyword">int</span> vertex<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> weights<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vertex <span class="token operator">=</span> vertex<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>weights <span class="token operator">=</span> weights<span class="token punctuation">;</span>

            <span class="token keyword">this</span><span class="token punctuation">.</span>datas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>vertex<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vertex<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 大写字母 A 从 65 开始</span>
                datas<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">65</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-8s&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> vertex <span class="token operator">:</span> datas<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 控制字符串输出长度：少于 8 位的，右侧用空格补位</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-8s&quot;</span><span class="token punctuation">,</span> vertex <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> weights<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-8s&quot;</span><span class="token punctuation">,</span> datas<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> weights<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-8s&quot;</span><span class="token punctuation">,</span> weights<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">mGraphTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 不连通的默认值：</span>
        <span class="token comment">// 这里设置为较大的数，是为了后续的计算方便，计算权值的时候，不会选择</span>
        <span class="token keyword">int</span> defaultNo <span class="token operator">=</span> <span class="token number">100000</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> weights <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
                <span class="token punctuation">{</span>defaultNo<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment">// A</span>
                <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">// B</span>
                <span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">// C</span>
                <span class="token punctuation">{</span>defaultNo<span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">// D</span>
                <span class="token punctuation">{</span>defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">// E</span>
                <span class="token punctuation">{</span>defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">// F</span>
                <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">}</span><span class="token comment">// G</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">MGraph</span> mGraph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MGraph</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> weights<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mGraph<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">floydTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> defaultNo <span class="token operator">=</span> <span class="token number">100000</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> weights <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
                <span class="token punctuation">{</span>defaultNo<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment">// A</span>
                <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">// B</span>
                <span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">// C</span>
                <span class="token punctuation">{</span>defaultNo<span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">// D</span>
                <span class="token punctuation">{</span>defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">// E</span>
                <span class="token punctuation">{</span>defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">// F</span>
                <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> defaultNo<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> defaultNo<span class="token punctuation">}</span><span class="token comment">// G</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">MGraph</span> mGraph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MGraph</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> weights<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mGraph<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">floyd</span><span class="token punctuation">(</span>mGraph<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">showFloydDis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">showFloydPre</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">showFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> vertexs<span class="token punctuation">;</span> <span class="token comment">// 存放顶点</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dis<span class="token punctuation">;</span> <span class="token comment">// 从各个顶点出发到其他顶点的距离</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> pre<span class="token punctuation">;</span> <span class="token comment">// 到达目标顶点的前驱顶点</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">floyd</span><span class="token punctuation">(</span><span class="token class-name">MGraph</span> mGraph<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        vertexs <span class="token operator">=</span> mGraph<span class="token punctuation">.</span>datas<span class="token punctuation">;</span>
        dis <span class="token operator">=</span> mGraph<span class="token punctuation">.</span>weights<span class="token punctuation">;</span>
        pre <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>mGraph<span class="token punctuation">.</span>vertex<span class="token punctuation">]</span><span class="token punctuation">[</span>mGraph<span class="token punctuation">.</span>vertex<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// 初始化 pre</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> pre<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>pre<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 显示 dis 和 pre，这个数据也是最后的结果数据
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showFloydDis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dis 结果&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>dis<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showFloydPre</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;pre 结果&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> weights<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-8s&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> vertex <span class="token operator">:</span> vertexs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 控制字符串输出长度：少于 8 位的，右侧用空格补位</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-8s&quot;</span><span class="token punctuation">,</span> vertex <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> weights<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-8s&quot;</span><span class="token punctuation">,</span> vertexs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> weights<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-8s&quot;</span><span class="token punctuation">,</span> weights<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 直接打印出我们的结果
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;最终结果格式化显示：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> dis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 先将 pre 数组输出一行</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>vertexs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot; 到其他顶点的最短距离&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 输出 dis 数组的一行数据</span>
            <span class="token comment">// 每一行数据是，一个顶点，到达其他顶点的最短路径</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> dis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-16s&quot;</span><span class="token punctuation">,</span> vertexs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot; → &quot;</span> <span class="token operator">+</span> vertexs<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot; = &quot;</span> <span class="token operator">+</span> dis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br></div></div><p>测试输出</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>        A       B       C       D       E       F       G       
A       100000  5       7       100000  100000  100000  2       
B       5       100000  100000  9       100000  100000  3       
C       7       100000  100000  100000  8       100000  100000  
D       100000  9       100000  100000  100000  4       100000  
E       100000  100000  8       100000  100000  5       4       
F       100000  100000  100000  4       5       100000  6       
G       2       3       100000  100000  4       6       100000  
dis 结果
        A       B       C       D       E       F       G       
A       100000  5       7       100000  100000  100000  2       
B       5       100000  100000  9       100000  100000  3       
C       7       100000  100000  100000  8       100000  100000  
D       100000  9       100000  100000  100000  4       100000  
E       100000  100000  8       100000  100000  5       4       
F       100000  100000  100000  4       5       100000  6       
G       2       3       100000  100000  4       6       100000  
pre 结果
        A       B       C       D       E       F       G       
A       0       0       0       0       0       0       0       
B       1       1       1       1       1       1       1       
C       2       2       2       2       2       2       2       
D       3       3       3       3       3       3       3       
E       4       4       4       4       4       4       4       
F       5       5       5       5       5       5       5       
G       6       6       6       6       6       6       6       
最终结果格式化显示：
A 到其他顶点的最短距离
A → A = 100000  A → B = 5       A → C = 7       A → D = 100000  A → E = 100000  A → F = 100000  A → G = 2       

B 到其他顶点的最短距离
B → A = 5       B → B = 100000  B → C = 100000  B → D = 9       B → E = 100000  B → F = 100000  B → G = 3       

C 到其他顶点的最短距离
C → A = 7       C → B = 100000  C → C = 100000  C → D = 100000  C → E = 8       C → F = 100000  C → G = 100000  

D 到其他顶点的最短距离
D → A = 100000  D → B = 9       D → C = 100000  D → D = 100000  D → E = 100000  D → F = 4       D → G = 100000  

E 到其他顶点的最短距离
E → A = 100000  E → B = 100000  E → C = 8       E → D = 100000  E → E = 100000  E → F = 5       E → G = 4       

F 到其他顶点的最短距离
F → A = 100000  F → B = 100000  F → C = 100000  F → D = 4       F → E = 5       F → F = 100000  F → G = 6       

G 到其他顶点的最短距离
G → A = 2       G → B = 3       G → C = 100000  G → D = 100000  G → E = 4       G → F = 6       G → G = 100000  

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p>可以看到如上的输出，能方便我们查看状态图。</p> <h3 id="弗洛伊德算法核心代码"><a href="#弗洛伊德算法核心代码" class="header-anchor">#</a> 弗洛伊德算法核心代码</h3> <p>就是三层循环处理</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">floyd</span><span class="token punctuation">(</span><span class="token class-name">MGraph</span> mGraph<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        vertexs <span class="token operator">=</span> mGraph<span class="token punctuation">.</span>datas<span class="token punctuation">;</span>
        dis <span class="token operator">=</span> mGraph<span class="token punctuation">.</span>weights<span class="token punctuation">;</span>
        pre <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>mGraph<span class="token punctuation">.</span>vertex<span class="token punctuation">]</span><span class="token punctuation">[</span>mGraph<span class="token punctuation">.</span>vertex<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// 初始化 pre</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> pre<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>pre<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 从中间顶点的遍历</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vertexs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 出发顶点</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> vertexs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 终点</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> vertexs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 中间节点连接: 从 j 到 i 到 k 的距离</span>
                    <span class="token keyword">int</span> lji <span class="token operator">=</span> dis<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    <span class="token keyword">int</span> lik <span class="token operator">=</span> dis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    <span class="token keyword">int</span> leng <span class="token operator">=</span> lji <span class="token operator">+</span> lik<span class="token punctuation">;</span>

                    <span class="token comment">// 直连</span>
                    <span class="token keyword">int</span> ljk <span class="token operator">=</span> dis<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>

                    <span class="token comment">// 如果间接距离比直连短，则更新</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>leng <span class="token operator">&lt;</span> ljk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        dis<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> leng<span class="token punctuation">;</span>
                        <span class="token comment">/*
                         最难理解的是这里：
                           i 是已知的中间节点，前驱的时候直接设置为 i (pre[j][k] = i;) ，结果是不对的。
                           比如：A-G-F-D ， 中间节点是是 两个节点，那么 A 到 D 的前驱节点是 F，而不是 G
                           如果直接赋值 i，前驱节点就会计算错误。
                           理解步骤为：
                            1. A-G-F：距离 8
                               A-F  : 不能直连
                               那么设置：A,F 的前驱节点是 G; 对应这里的代码是 j,i
                            2. G-F-D: 距离是 10
                               G-D：不能直连
                               那么设置：G,D 的前驱节点是 F; 对应这里的代码是 i,k
                            3. 那么最终 A,D 的前驱节点是是什么呢？
                               其实就应该是 G,D 指向的值; 对应这里的代码是 i,k
                         */</span>
                        pre<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> pre<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 前驱节点更新为中间节点</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>测试输出结果</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>        A       B       C       D       E       F       G       
A       100000  5       7       100000  100000  100000  2       
B       5       100000  100000  9       100000  100000  3       
C       7       100000  100000  100000  8       100000  100000  
D       100000  9       100000  100000  100000  4       100000  
E       100000  100000  8       100000  100000  5       4       
F       100000  100000  100000  4       5       100000  6       
G       2       3       100000  100000  4       6       100000  
dis 结果
        A       B       C       D       E       F       G       
A       4       5       7       12      6       8       2       
B       5       6       12      9       7       9       3       
C       7       12      14      17      8       13      9       
D       12      9       17      8       9       4       10      
E       6       7       8       9       8       5       4       
F       8       9       13      4       5       8       6       
G       2       3       9       10      4       6       4       
pre 结果
        A       B       C       D       E       F       G       
A       6       0       0       6       6       6       0       
B       1       6       0       1       6       6       1       
C       2       0       0       5       2       4       0       
D       6       3       5       5       5       3       5       
E       6       6       4       5       6       4       4       
F       6       6       4       5       5       3       5       
G       6       6       0       5       6       6       0       
最终结果格式化显示：
A 到其他顶点的最短距离
A → A = 4       A → B = 5       A → C = 7       A → D = 12      A → E = 6       A → F = 8       A → G = 2       

B 到其他顶点的最短距离
B → A = 5       B → B = 6       B → C = 12      B → D = 9       B → E = 7       B → F = 9       B → G = 3       

C 到其他顶点的最短距离
C → A = 7       C → B = 12      C → C = 14      C → D = 17      C → E = 8       C → F = 13      C → G = 9       

D 到其他顶点的最短距离
D → A = 12      D → B = 9       D → C = 17      D → D = 8       D → E = 9       D → F = 4       D → G = 10      

E 到其他顶点的最短距离
E → A = 6       E → B = 7       E → C = 8       E → D = 9       E → E = 8       E → F = 5       E → G = 4       

F 到其他顶点的最短距离
F → A = 8       F → B = 9       F → C = 13      F → D = 4       F → E = 5       F → F = 8       F → G = 6       

G 到其他顶点的最短距离
G → A = 2       G → B = 3       G → C = 9       G → D = 10      G → E = 4       G → F = 6       G → G = 4       

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h3 id="关于前驱节点的计算"><a href="#关于前驱节点的计算" class="header-anchor">#</a> 关于前驱节点的计算</h3> <p>核心代码中有下面这样一段注释</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>i 是已知的中间节点，前驱的时候直接设置为 i (pre[j][k] = i;) ，结果是不对的。
比如：A-G-F-D ， 中间节点是是 两个节点，那么 A 到 D 的前驱节点是 F，而不是 G
如果直接赋值 i，前驱节点就会计算错误。
理解步骤为：
	1. A-G-F：距离 8
		 A-F  : 不能直连
     那么设置：A,F 的前驱节点是 G; 对应这里的代码是 j,i
  2. G-F-D: 距离是 10
     G-D：不能直连
     那么设置：G,D 的前驱节点是 F; 对应这里的代码是 i,k
  3. 那么最终 A,D 的前驱节点是是什么呢？
		 其实就应该是 G,D 指向的值; 对应这里的代码是 i,k
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>对于上面的描述，下面用图例解释下</p> <p><img src="/dsalg-tutorial/assets/img/image-20210110202919199.5b222549.png" alt="image-20210110202919199"></p> <ol><li><p>A-G-F，设置 A 到达 F 的前驱是 G，<code>A,F = 6</code>，上图中的下标 6 就是 G</p> <p>这个是正确的</p></li> <li><p>G-F-D，设置 G 到达 D 的前驱是 F，<code>G,D = 5</code>，上图中的下标 5 就是 F</p></li> <li><p>那么 A-G-F-D，设置 A 到达 D 的前驱是 ?</p> <p>这里需要这样来看</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>A - G-F-D
A - X
把 A-G-F-D 看成  A-X
			  而 X=G-F-D
			     G-F-D, 的前驱节点是 F
			  则 A-X 的前驱节点是 F
			  则 A-D 的前驱节点是 F
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zq99299/dsalg-tutorial/edit/master/docs/dsalg-java-hsp/14/09.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新: :</span> <span class="time">2023-05-16 10:15:11</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dsalg-tutorial/dsalg-java-hsp/14/08.html" class="prev">
        迪杰斯特拉算法
      </a></span> <span class="next"><a href="/dsalg-tutorial/dsalg-java-hsp/14/10.html">
        马踏棋盘算法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/dsalg-tutorial/assets/js/app.344c66ff.js" defer></script><script src="/dsalg-tutorial/assets/js/2.536adad5.js" defer></script><script src="/dsalg-tutorial/assets/js/12.23aedd65.js" defer></script><script src="/dsalg-tutorial/assets/js/34.afb1225f.js" defer></script>
  </body>
</html>
